##########################
# STEALER
# by gugutz
# version 0.0.1
#################################


#################################
# CREDITS :)
#################################

sysmsg '♥ SNOOP ITEMS by gugutz ♥' 91


#################################
# CHANGELOG
#################################
#
# v0.0.1
# - Initial release


#################################
# CREATE ALL LISTS FOR CONFIG
#################################


if not listexists 'snoop_config_lists'
    createlist 'snoop_config_lists'
else
    clearlist 'snoop_config_lists'
endif

# routine-related lists
pushlist 'snoop_config_lists' 'action_delay'
pushlist 'snoop_config_lists' 'found_something_to_steal'


foreach list in 'snoop_config_lists'
    if not listexists list
        createlist list
    else
        clearlist list
    endif
endfor


#################################
# CREATE ALL TIMERS
#################################

createlist 'snoop_timers'
pushlist 'snoop_timers' 'wait_snoop_cooldown'



foreach timer in 'snoop_timers'
    if not timerexists timer
        createtimer timer
        settimer timer 99999
    endif
endfor


################################
# SCRIPT CONFIGURATION
################################

pushlist 'action_delay' 600


#################################
# INITIALIZE THE CONFIGURATION VALUES AS VARIABLES BUT FROM LIST SO WE DONT NEED TO ITERATE TO GET THE INDEX 0
#################################

if atlist 'action_delay' 0 as action_delay

#################################
# POPULATE LIST WITH ITEMS TO SEARCH
#################################


if not listexists 'items_to_steal'
    createlist 'items_to_steal'

    pushlist 'items_to_steal' 'chain link'
    # aspect focis
    pushlist 'items_to_steal' 48261


    # # mcd (this goes into the resource stockpile)
    pushlist 'items_to_steal' 17087
    # research material
    pushlist 'items_to_steal' 29348

    # spell hue deeds
    pushlist 'items_to_steal' 5359
    # rare cloth
    pushlist 'items_to_steal' 'folded cloth'
    pushlist 'items_to_steal' 'map'

    pushlist 'items_to_steal' 'aspect core'
    # aspect extract
    pushlist 'items_to_steal' 3836


    # skillMasteryOrb
    pushlist 'items_to_steal' 'void orb'
    # skill scrolls
    pushlist 'items_to_steal' 'scroll of calling'

    # runebook dye
    pushlist 'items_to_steal' 3838
    # backpack dye
    pushlist 'items_to_steal' 3839
    # headwear dye
    pushlist 'items_to_steal' 3842
    # facial hair dye
    pushlist 'items_to_steal' 3843
    # hair, shield and quiver dye
    pushlist 'items_to_steal' 3843
    # fortuniture dye
    pushlist 'items_to_steal' 29025
    # carpet dye
    pushlist 'items_to_steal' 29036

    # botas que da pano de cor
    pushlist 'items_to_steal' '0x1711'
endif

unsetvar steal_container
setvar steal_container

if targetexists 'neutral'
    sysmsg 'select container to search'
    overhead 'select container to search' 53
    while targetexists 'neutral'
        wait 100
    endwhile
endif

if not varexist steal_container
    sysmsg 'ABORTED...' 44
    stop
endif

dclick steal_container
wait action_delay

if insysmsg 'You must wait'
    while insysmsg 'You must wait'
        clearsysmsg
        dclick steal_container
        wait action_delay
    endwhile
endif


foreach item in items_to_steal
    if findtype item steal_container as target_item
        overhead 'FOUND {{item}}!!'
        settimer 'snoop_timer' 0
        pushlist 'found_something_to_steal' 'yes'
        hotkey "Set Last Target"
        wft 600
        if targetexists 'neutral'
            overhead 'SETTING {{item}} AS LAST'
            target target_item
            break
        endif
    endif
endfor

if inlist 'found_something_to_steal' 'yes'

    while timer 'snoop_timer' < 4000
        sysmsg 'waiting snoop cooldown' 56
        wait 100
    endwhile
    overhead 'CAN STEAL NOW! USE LAST TARGET'
endif


#################################
# closing the ifs that initialized the config variables on top of tile
#################################

endif
