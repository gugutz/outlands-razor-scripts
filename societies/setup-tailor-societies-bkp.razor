#################################
# SETUP TAILORING SOCIETIES
# v0.0.1
# by gugutz
#
#################################
# CREDITS :)
#
sysmsg '♥ SETUP TAILORING SOCEITIES by gugutz ♥' 89
#




setvar! action_delay 600
setvar! crafting_queue_gump_id 453554062
setvar! societies_gump_id 1554294796
setvar! tailoring_gump_id 949095101
setvar! stockpile_gump_id 1859005118



if not listexists 'society_gump_pages'
    createlist 'society_gump_pages'
    pushlist 'society_gump_pages' 1
    pushlist 'society_gump_pages' 2
endif

# if not listexists 'gump_btns'
#     createlist 'gump_btns'
#     pushlist 'gump_btns' 100
# endif

# if not listexists 'leather_items'
#     createlist 'leather_items'
#     pushlist 'leather_items' 'Leather Cap'
#     pushlist 'leather_items' 'Leather Chest'
# endif



######################################
# OPEN TAILORING CRAFTING GUMP
######################################
while not gumpexists tailoring_gump_id
    if findtype 'resource container' ground any any 2 as stockpile
        sysmsg 'OPENING TAILORING CRAFTING GUMP USING STOCKPILE...' 56
        while not gumpexists stockpile_gump_id
            sysmsg 'Clicking stockpile'
            dclick stockpile
            wait action_delay
        endwhile

        waitforgump stockpile_gump_id
        gumpresponse 7 stockpile_gump_id
        waitforgump stockpile_gump_id
        gumpresponse 106 stockpile_gump_id
        waitforgump tailoring_gump_id
    elseif findtype 'sewing kit' backpack as sewing_kit
        sysmsg 'OPENING TAILORING CRAFTING GUMP USING SEWEING KIT IN BACKPACK...' 56
        dclick sewing_kit
        waitforgump tailoring_gump_id
    endif
endwhile

# wait action_delay

######################################
# OPEN CRAFTING QUEUE GUMP
######################################
while not gumpexists crafting_queue_gump_id
    sysmsg 'OPENING CRAFTING QUEUE GUMP...' 56
    say '[craftingqueue'
    waitforgump crafting_queue_gump_id action_delay
endwhile

# wait action_delay

# clean the currently selected crafting queue to make sure
# we wont end up only appending more items and reaching this
# queues max capacity
    # while not ingump 'societies' 453554062
    #     sysmsg "Searching for 'societies' crafting queue..." 49
    #     gumpresponse 3 crafting_queue_gump_id
    #     waitforgump crafting_queue_gump_id action_delay
    # endwhile

while ingump 'Bone' 453554062 or ingump 'Leather' 453554062 or ingump 'Studded' 453554062 or ingump 'Fishing' 453554062 or ingump 'Rope' 453554062
    sysmsg "Deleting all items in crafting queue" 49
    gumpresponse 100 crafting_queue_gump_id
    waitforgump crafting_queue_gump_id action_delay
endwhile

# wait action_delay

######################################
# OPEN SOCIETIES GUMP
######################################
while not gumpexists societies_gump_id
    sysmsg 'OPENING SOCIETIES GUMP...' 56
    say '[society'
    waitforgump societies_gump_id action_delay


endwhile


# wait action_delay

######################################
# OPEN ORDER OF ARMORERS SOCIETIES
######################################
while gumpexists societies_gump_id and not ingump 'Next Society' 1554294796
    sysmsg 'ENTERING ORDER OF ARMORERS SOCIETIES...' 56
    gumpresponse 10 societies_gump_id
    waitforgump societies_gump_id action_delay
endwhile

# wait action_delay

foreach page in 'society_gump_pages'
    sysmsg 'SCANNIGN SOCIETIES PÀGE {{page}}'

    # # make sure we're on the correct society gump page
    if page == 1
        while gumpexists societies_gump_id and not ingump '1/2' 1554294796
            sysmsg 'SWITCHING TO FIRST SOCEITIES PAGE'
            gumpresponse 3 societies_gump_id
            waitforgump societies_gump_id action_delay
        endwhile
    elseif page == 2
        while gumpexists societies_gump_id and not ingump '2/2' 1554294796
            sysmsg 'SWITCHING TO SECOND SOCEITIES PAGE'
            gumpresponse 4 societies_gump_id
            waitforgump societies_gump_id action_delay
        endwhile
    endif

    # while gumpexists societies_gump_id
    #     foreach item_name in 'leather_items'
    #         sysmsg '[DEBUG] searching for {{item_name}} ingump {{societies_gump_id}}'
    #         if ingump '{{item_name}}' 1554294796
    #             sysmsg '[DEBUG] FOUND {{item_name}} INGUMP {{societies_gump_id}}!!!' 90
    #             setvar! found_leather_armor_item 1
    #         endif
    #     endfor

    #     if varexist found_leather_armor_item
    #         # go to first categories page
    #         while not ingump '1/2' 949095101
    #             gumpresponse 8 tailoring_gump_id
    #             waitforgump tailoring_gump_id action_delay
    #         endwhile

    #         # switch to leather armor category
    #         while not ingump 'Leather Armor' 949095101
    #             gumpresponse 101 tailoring_gump_id
    #             waitforgump tailoring_gump_id action_delay
    #         endwhile

    #         foreach item in 'leather_items'
    #             if ingump item societies_gump_id
    #                 sysmsg 'FOUND {{item}} IN SOCIETY GUMP!'
    #                 if atlist 'gump_btns' index as item_crafting_queue_gump_btn
    #                     sysmsg 'FOUND {{item_crafting_queue_gump_btn}} GUMP BTN TO PRES'
    #                     gumpresponse item_crafting_queue_gump_btn tailoring_gump_id
    #                     waitforgump tailoring_gump_id action_delay
    #                 endif
    #             endif
    #         endfor
    #     endif
    # endwhile


    ######################################
    #-------------------------------------
    # PAGE 2 OF TAILORING MENU
    #-------------------------------------
    ######################################
    sysmsg 'SWITHING PAGE ON TAILOR GUMP' 52
    gumpresponse 8 tailoring_gump_id
    waitforgump tailoring_gump_id action_delay


    ######################################
    # BONE ARMORS
    ######################################

    if ingump 'Bone Gorget ' 1554294796 or ingump 'Bone Gloves' 1554294796 or ingump 'Bone Helm' 1554294796 or ingump 'Bone Arms' 1554294796 or ingump 'Bone Legs' 1554294796 or ingump 'Bone Skirt' 1554294796 or ingump 'Bone Chest' 1554294796
    # if ingump 'Bone' societies_gump_id
        sysmsg 'FOUND BONE ARMOR ITEM IN SOCIETY GUMP' 52

        # while not ingump 'Bone Gorget' 949095101
        sysmsg 'SWITCHING TO BONE ARMOR CATEGORY' 52
        gumpresponse 100 tailoring_gump_id
        waitforgump tailoring_gump_id action_delay
        # endwhile

        if ingump 'Bone Gorget' 1554294796
            gumpresponse 400 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Bone Gloves' 1554294796
            gumpresponse 401 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Bone Helm' 1554294796
            gumpresponse 402 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Bone Arms' 1554294796
            gumpresponse 403 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Bone Legs' 1554294796
            gumpresponse 404 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Bone Skirt' 1554294796
            gumpresponse 405 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Bone Chest' 1554294796
            gumpresponse 406 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

    endif

    ######################################
    # LEATHER ARMORS
    ######################################

    if ingump 'Leather Gorget' 1554294796 or ingump 'Leather Gloves' 1554294796 or ingump 'Leather Cap' 1554294796 or ingump 'Leather Arms' 1554294796 or ingump 'Leather Legs' 1554294796 or ingump 'Leather Shorts' 1554294796 or ingump 'Leather Skirt' 1554294796 or ingump 'Leather Chest' 1554294796 or ingump 'Leather Bustier' 1554294796 or ingump 'Female Leather Chest' 1554294796
    # if ingump 'Leather' societies_gump_id
        sysmsg 'FOUND LEATHER ARMOR ITEM IN SOCIETY GUMP' 52

        # if ingump 'Leather Gorget' 949095101
        # else
            sysmsg 'SWITCHING TO LEATHER ARMOR CATEGORY' 52
            gumpresponse 101 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        # endif

        if ingump 'Leather Gorget' 1554294796
            gumpresponse 400 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Leather Gloves' 1554294796
            gumpresponse 401 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Leather Cap' 1554294796
            gumpresponse 402 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Leather Arms' 1554294796
            gumpresponse 403 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Leather Legs' 1554294796
            gumpresponse 404 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Leather Shorts' 1554294796
            gumpresponse 405 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Leather Skirt' 1554294796
            gumpresponse 406 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Leather Chest' 1554294796
            gumpresponse 407 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Leather Bustier' 1554294796
            gumpresponse 408 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Female Leather Chest' 1554294796
            gumpresponse 409 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

    endif


    ######################################
    # STUDDED ARMORS
    ######################################

    if ingump 'Studded Gorget' 1554294796 or ingump 'Studded Gloves' 1554294796 or ingump 'Studded Cap' 1554294796 or ingump 'Studded Arms' 1554294796 or ingump 'Studded Legs' 1554294796 or ingump 'Studded Skirt' 1554294796 or ingump 'Studded Chest' 1554294796 or ingump 'Studded Bustier' 1554294796 or ingump 'Female Studded Chest' 1554294796
    # if ingump 'Leather' societies_gump_id
        sysmsg 'FOUND STUDDED ARMOR ITEM IN SOCIETY GUMP' 52

        # if ingump 'Leather Gorget' 949095101
        # else
            sysmsg 'SWITCHING TO LEATHER ARMOR CATEGORY' 52
            gumpresponse 102 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        # endif

        if ingump 'Studded Gorget' 1554294796
            gumpresponse 400 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Studded Gloves' 1554294796
            gumpresponse 401 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Studded Cap' 1554294796
            gumpresponse 402 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Studded Arms' 1554294796
            gumpresponse 403 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Studded Legs' 1554294796
            gumpresponse 404 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Studded Skirt' 1554294796
            gumpresponse 405 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Studded Chest' 1554294796
            gumpresponse 406 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Studded Bustier' 1554294796
            gumpresponse 407 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Female Studded Chest' 1554294796
            gumpresponse 408 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

    endif

    ######################################
    # QUIVERS
    ######################################

    if ingump 'Quiver' 1554294796

        # if ingump 'Fishing Items' 949095101
        # else
        # endif

        # if ingump 'Fishing Net' 949095101
        # else
        sysmsg 'SWITCHING TO QUIVERS CATEGORY' 52
        gumpresponse 107 tailoring_gump_id
        waitforgump tailoring_gump_id action_delay
        # endif

        if ingump 'Dullhide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 401 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Shadowhide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 402 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Copperhide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 403 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Bronzehide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 404 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Goldenhide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 405 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Rosehide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 406 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Verehide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 407 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Valehide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 408 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Avarhide Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 409 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Quiver' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 400 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif
    endif

    ######################################
    #-------------------------------------
    # PAGE 2 OF TAILORING MENU
    #-------------------------------------
    ######################################
    sysmsg 'SWITHING PAGE ON TAILOR GUMP' 52
    gumpresponse 9 tailoring_gump_id
    waitforgump tailoring_gump_id action_delay


    ######################################
    # FISHING NETS
    ######################################

    if ingump 'Fishing Net' 1554294796

        # if ingump 'Fishing Items' 949095101
        # else
        # endif

        # if ingump 'Fishing Net' 949095101
        # else
        sysmsg 'SWITCHING TO FISHING  ITEMS CATEGORY' 52
        gumpresponse 101 tailoring_gump_id
        waitforgump tailoring_gump_id action_delay
        # endif


        if ingump 'Dullhide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 401 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Shadowhide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 402 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Copperhide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 403 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Bronzehide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 404 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Goldenhide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 405 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Rosehide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 406 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Verehide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 407 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Valehide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 408 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Avarhide Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 409 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

        if ingump 'Fishing Net' 1554294796
            waitforgump tailoring_gump_id action_delay
            gumpresponse 400 tailoring_gump_id
            waitforgump tailoring_gump_id action_delay
        endif

    endif



endfor

gumpclose stockpile_gump_id
gumpclose tailoring_gump_id
