#setvar! HARPOON 9917
#setvar! HEAVY_CROSSBOW 5117
#setvar! HALBERD 5182
#setvar! BARDICHE 3917
#setvar! LONG_SPEAR 5177
#setvar! LONG_SPEAR 3938
#setvar! HATCHET 3909 (for lumberjackers)
#setvar! PICKAXE 3718 (for miners)

# createtimer 'time_to_iterate_list'
# settimer 'time_to_iterate_list' 0


# if a weapon of the same type we wanna equip is already equiped,
#just unequipt it and exit to simulate a 'toggle' effect
sysmsg 'TOGGLE HEAVY WEAPON' 1161

if findtype 9917|5117|5182|3917|5177|3938|3908 lefthand or findtype 3718 righthand
    cast 'Magic Lock'
    stop
endif


if findtype 9917|5117|5182|3917|5177|3938|3908|3718 backpack as found
    if not dead lasttarget
        attack lasttarget
    endif

    if targetexists
        # check if theres need to undress hands before equiping
        if not rhandempty or not lhandempty
            cast 'Magic Lock'
        endif

        @drop backpack
        lift found
        drop self FirstValid
    else
        dclick found
    endif
endif

# sysmsg "ITERATION TOOK {{time_to_iterate_list}}"
