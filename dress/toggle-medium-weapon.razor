#setvar! CROSSBOW 3920
#setvar! AXE 3913
#setvar! BATTLEAXE 3911
#setvar! DOUBLE_AXE 3915
#setvar! TWO_HANDED_AXE 5187
#setvar! LARGE_BATTLE_AXE 5115
#setvar! BLACK_STAFF 3568
#setvar! GNARLED_STAFF 5112
#setvar! QUARTER_STAFF 3721
#setvar! SHEPHERDS_CROOK 3713
#setvar! PITCHFORK 3917
#setvar! SHORT_SPEAR 5123


sysmsg 'TOGGLE MEDIUM WEAPON' 1161

# if a weapon of the same type we wanna equip is already equiped,
#just unequipt it and exit to simulate a 'toggle' effect
if findtype 3920 righthand or findtype 3913|3911|3915|5187|5115|3568|5112|3721|3713|3917|5123 lefthand
    cast 'Magic Lock'
    stop
endif


if findtype 3920|3913|3911|3915|5187|5115|3568|5112|3721|3713|3917|5123 backpack as found
    if not dead lasttarget
        attack lasttarget
    endif

    if targetexists
        # check if theres need to undress hands before equiping
        if not rhandempty or not lhandempty
            cast 'Magic Lock'
        endif

        @drop backpack
        lift found
        drop self FirstValid
    else
        dclick found
    endif
endif

