# Dispell Fields
# v0.0.2
# by gugutz
#
# This script will dispel fields if a neutral target is opened
# It will look for fields in this order:
# - blue moongates
# - wall of stones
# - energy fields
# - paralyze fields
# - poison fields
#################################

if not targetexists 'neutral'
    cast 'dispel field'
    stop
endif

if not timerexists 'dispel_field_execution_timer'
    createtimer 'dispel_field_execution_timer'
endif

settimer 'dispel_field_execution_timer' 0

unsetvar! field
if findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 1 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 2 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 3 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 4 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 5 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 6 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 7 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 8 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 9 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 10 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 11 as found
    setvar! field found
elseif findtype 3948|19739|14662|10408|14695|14613|14678|14742 ground 0 any 12 as found
    setvar! field found
else
    overhead '*no fields within 12 tiles*' 54
endif

if varexist field
    overhead '*dispelling field*' 56
    target field
endif

sysmsg 'FINISHED IN {{dispel_field_execution_timer}}' 90
