# Fishing with Captcha Detection (cooldown) by Jaseowns
# UO Outlands
# Requirements
#    Setup a cooldown named "Fish" - it must match that name.
#    If you run the script without the cooldown, it will show you instructions.
#    but you want to have 3 entries with 10 seconds on each
#            sysmsg: fish
#            sysmsg: You retrieve a
#            overhead: You catch
#    The script works by checking the cooldown firing

clearsysmsg

@setvar! fishing_CD 10000
setvar! success_msg_color 65
setvar! warning_msg_color 54
setvar! dockmaster_gump_id 3287496917
setvar! action_delay 600
setvar! deposit_catch_delay 60000

if not timerexists fishing_timer
    createtimer fishing_timer
    settimer fishing_timer fishing_CD
endif

if not timerexists deposit_catch_timer
    createtimer deposit_catch_timer
    settimer deposit_catch_timer deposit_catch_delay
endif

cooldown FISHING fishing_CD

if not cooldown FISHING
    overhead "Please setup a cooldown named:" 34
    overhead "Fish" 88
    sysmsg "Please setup a cooldown named:" 34
    sysmsg "Fish" 88
    sysmsg "Add these with 10 second cooldown" 66
    sysmsg "sysmsg: fish"
    sysmsg "sysmsg: You retrieve a"
    sysmsg "overhead: You catch"
    stop
endif





# overhead "Target organizer 20 hotbag"
# organizer 20 set
# while not insysmsg "Container set successfully"
#     wait 250
# endwhile

cooldown FISHING 10000
while not dead

    if lhandempty
        if findtype "fishing pole" backpack as item
            lift item
            wait action_delay
            drop self lefthand
            wait action_delay
        else
            overhead "Out of poles!" 34
            stop
        endif
    endif

    # if insysmsg "The world will save in 15 seconds"
    #     for 30
    #         overhead 'Waiting for world save...'
    #         wait 1000
    #         if insysmsg 'save complete'
    #             overhead 'Save complete - continue on!' 88
    #             # replay
    #         endif
    #     endfor
    # endif


    #if timer fishing_timer >= fishing_CD
    if cooldown FISHING
        cooldown FISHING 0
        hotkey 'Use item in hand'
        wait action_delay
        settimer fishing_timer 0
    endif

endwhile